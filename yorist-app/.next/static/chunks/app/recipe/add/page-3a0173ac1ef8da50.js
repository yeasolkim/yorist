(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[463],{1061:function(e,t,n){Promise.resolve().then(n.bind(n,8900))},8900:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var r=n(7437),o=n(2265),s=n(4033);let a=(0,n(1492).eI)("https://rshosgiwnqcvwfnkqdwc.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJzaG9zZ2l3bnFjdndmbmtxZHdjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTE2MzMxNjEsImV4cCI6MjA2NzIwOTE2MX0.9yrX80F0-3w0H8u3Qx449oYRpD4vA1wEjEYP7mdylGg");function l(){let e=(0,s.useRouter)(),[t,n]=(0,o.useState)({title:"",description:"",videoUrl:""}),[l,i]=(0,o.useState)([]),[d,c]=(0,o.useState)({ingredient_id:"",name:"",amount:"",unit:"",shopUrl:""}),[u,x]=(0,o.useState)([]),[m,h]=(0,o.useState)(!1),[p,g]=(0,o.useState)([]),[b,f]=(0,o.useState)({description:""}),w=e=>{if(!e)return"";for(let t of[/(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/)([^&\n?#]+)/,/youtube\.com\/watch\?.*v=([^&\n?#]+)/]){let n=e.match(t);if(n)return"https://www.youtube.com/embed/".concat(n[1])}return e};(0,o.useEffect)(()=>{if(d.name.length<2){x([]),h(!1);return}a.from("ingredients_master").select("id, name, unit, shop_url").ilike("name","%".concat(d.name,"%")).limit(10).then(e=>{let{data:t}=e;x(t||[]),h(!0)})},[d.name]);let v=e=>{i(l.filter(t=>t.ingredient_id!==e&&t.name!==e))},j=e=>{g(p.filter((t,n)=>n!==e))},y=n=>{n.preventDefault(),console.log("새 레시피:",{id:Date.now().toString(),title:t.title,description:t.description,videoUrl:t.videoUrl,ingredients:l,steps:p,createdat:new Date,isfavorite:!1}),e.push("/")};return(0,r.jsxs)("div",{className:"min-h-screen bg-black pb-20",children:[(0,r.jsxs)("header",{className:"bg-[#181818] border-b border-[#232323] px-4 py-3 flex items-center justify-between",children:[(0,r.jsx)("button",{onClick:()=>e.back(),className:"text-gray-300 hover:text-white p-2.5 rounded-xl bg-[#232323] hover:bg-[#2a2a2a] transition-all duration-200 min-h-[44px] min-w-[44px] flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,r.jsx)("h1",{className:"text-lg font-bold text-white",children:"레시피 추가"}),(0,r.jsx)("button",{onClick:y,className:"bg-gradient-to-r from-orange-400 to-orange-500 text-white font-bold px-5 py-2 rounded-xl shadow hover:shadow-lg hover:-translate-y-0.5 transition-all duration-200",children:"저장"})]}),(0,r.jsx)("main",{className:"p-4 space-y-6 max-w-md mx-auto",children:(0,r.jsxs)("form",{onSubmit:y,className:"space-y-6",children:[(0,r.jsxs)("section",{className:"bg-[#181818] rounded-2xl p-5 space-y-4 shadow-lg border border-[#232323]",children:[(0,r.jsx)("h2",{className:"text-lg font-bold text-white mb-2",children:"기본 정보"}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:["레시피 제목 ",(0,r.jsx)("span",{className:"text-orange-400",children:"*"})]}),(0,r.jsx)("input",{type:"text",value:t.title,onChange:e=>n({...t,title:e.target.value}),className:"w-full px-4 py-3 bg-[#232323] border border-[#333] text-white rounded-xl focus:border-orange-400 focus:ring-2 focus:ring-orange-400/20 outline-none transition",placeholder:"예: 김치찌개",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"레시피 설명"}),(0,r.jsx)("textarea",{value:t.description,onChange:e=>n({...t,description:e.target.value}),className:"w-full px-4 py-3 bg-[#232323] border border-[#333] text-white rounded-xl focus:border-orange-400 focus:ring-2 focus:ring-orange-400/20 outline-none transition",placeholder:"레시피에 대한 간단한 설명을 입력하세요",rows:3})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"유튜브 링크"}),(0,r.jsx)("input",{type:"url",value:t.videoUrl,onChange:e=>n({...t,videoUrl:e.target.value}),className:"w-full px-4 py-3 bg-[#232323] border border-[#333] text-white rounded-xl focus:border-orange-400 focus:ring-2 focus:ring-orange-400/20 outline-none transition",placeholder:"https://www.youtube.com/watch?v=..."}),t.videoUrl&&w(t.videoUrl)&&(0,r.jsxs)("div",{className:"mt-3",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"미리보기"}),(0,r.jsx)("div",{className:"relative w-full h-48 bg-[#232323] rounded-xl overflow-hidden",children:(0,r.jsx)("iframe",{src:w(t.videoUrl),className:"w-full h-full",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})})]})]})]}),(0,r.jsxs)("section",{className:"bg-[#181818] rounded-2xl p-5 space-y-4 shadow-lg border border-[#232323]",children:[(0,r.jsx)("h2",{className:"text-lg font-bold text-white mb-2",children:"재료"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-2 relative",children:[(0,r.jsxs)("div",{className:"col-span-1",children:[(0,r.jsx)("input",{type:"text",value:d.name,onChange:e=>c({...d,name:e.target.value}),className:"px-4 py-3 bg-[#232323] border border-[#333] text-white rounded-xl focus:border-orange-400 focus:ring-2 focus:ring-orange-400/20 outline-none transition w-full",placeholder:"재료명",autoComplete:"off",onFocus:()=>d.name.length>=2&&h(!0),onBlur:()=>setTimeout(()=>h(!1),150)}),m&&u.length>0&&(0,r.jsx)("ul",{className:"absolute z-10 left-0 right-0 mt-1 bg-[#232323] border border-[#333] rounded-xl shadow-lg max-h-48 overflow-y-auto",children:u.map(e=>(0,r.jsxs)("li",{className:"px-4 py-2 text-white hover:bg-orange-500/20 cursor-pointer flex items-center justify-between",onMouseDown:()=>{c({ingredient_id:e.id,name:e.name,amount:"",unit:e.unit||"",shopUrl:e.shop_url||""}),h(!1)},children:[(0,r.jsxs)("span",{children:[e.name," ",e.unit&&(0,r.jsxs)("span",{className:"text-gray-400 text-xs",children:["(",e.unit,")"]})]}),e.shop_url&&(0,r.jsx)("a",{href:e.shop_url,target:"_blank",rel:"noopener noreferrer",className:"ml-2 text-orange-400 underline text-xs",children:"구매"})]},e.id))})]}),(0,r.jsx)("input",{type:"text",value:d.amount,onChange:e=>c({...d,amount:e.target.value}),className:"px-4 py-3 bg-[#232323] border border-[#333] text-white rounded-xl focus:border-orange-400 focus:ring-2 focus:ring-orange-400/20 outline-none transition w-full",placeholder:"양"}),(0,r.jsx)("input",{type:"text",value:d.unit,onChange:e=>c({...d,unit:e.target.value}),className:"px-4 py-3 bg-[#232323] border border-[#333] text-white rounded-xl focus:border-orange-400 focus:ring-2 focus:ring-orange-400/20 outline-none transition w-full col-span-2",placeholder:"단위 (g, 개, 큰술)"}),(0,r.jsx)("input",{type:"text",value:d.shopUrl,onChange:e=>c({...d,shopUrl:e.target.value}),className:"px-4 py-3 bg-[#232323] border border-[#333] text-white rounded-xl focus:border-orange-400 focus:ring-2 focus:ring-orange-400/20 outline-none transition w-full col-span-2",placeholder:"구매 링크 (선택)"})]}),(0,r.jsx)("button",{type:"button",onClick:()=>{d.name&&d.amount&&(i([...l,{ingredient_id:Date.now().toString(),name:d.name,amount:d.amount,unit:d.unit,shopUrl:d.shopUrl}]),c({ingredient_id:"",name:"",amount:"",unit:"",shopUrl:""}))},className:"w-full bg-gradient-to-r from-orange-400 to-orange-500 text-white font-bold rounded-xl px-4 py-3 mt-2 shadow hover:shadow-lg hover:-translate-y-0.5 transition-all",children:"재료 추가"}),(0,r.jsx)("div",{className:"space-y-2",children:l.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 bg-[#232323] rounded-xl",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("span",{className:"font-medium text-white",children:e.name}),(0,r.jsxs)("span",{className:"text-gray-400",children:[e.amount," ",e.unit]}),e.shopUrl&&(0,r.jsx)("a",{href:e.shopUrl,target:"_blank",rel:"noopener noreferrer",className:"ml-2 text-orange-400 underline text-xs",children:"구매"})]}),(0,r.jsx)("button",{type:"button",onClick:()=>v(e.ingredient_id||e.name),className:"text-red-400 hover:text-red-600",children:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},e.ingredient_id||e.name||t))})]}),(0,r.jsxs)("section",{className:"bg-[#181818] rounded-2xl p-5 space-y-4 shadow-lg border border-[#232323]",children:[(0,r.jsx)("h2",{className:"text-lg font-bold text-white mb-2",children:"요리 단계"}),(0,r.jsx)("div",{className:"space-y-2",children:(0,r.jsx)("textarea",{value:b.description,onChange:e=>f({...b,description:e.target.value}),className:"w-full px-4 py-3 bg-[#232323] border border-[#333] text-white rounded-xl focus:border-orange-400 focus:ring-2 focus:ring-orange-400/20 outline-none transition",placeholder:"요리 단계를 설명하세요",rows:3})}),(0,r.jsx)("button",{type:"button",onClick:()=>{b.description&&(g([...p,{description:b.description}]),f({description:""}))},className:"w-full bg-gradient-to-r from-orange-400 to-orange-500 text-white font-bold rounded-xl px-4 py-3 mt-2 shadow hover:shadow-lg hover:-translate-y-0.5 transition-all",children:"단계 추가"}),(0,r.jsx)("div",{className:"space-y-2",children:p.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 bg-[#232323] rounded-xl",children:[(0,r.jsx)("div",{className:"flex items-center space-x-2",children:(0,r.jsx)("span",{className:"text-white",children:e.description})}),(0,r.jsx)("button",{type:"button",onClick:()=>j(t),className:"text-red-400 hover:text-red-600 ml-2",children:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},t))})]})]})})]})}}},function(e){e.O(0,[717,971,938,744],function(){return e(e.s=1061)}),_N_E=e.O()}]);