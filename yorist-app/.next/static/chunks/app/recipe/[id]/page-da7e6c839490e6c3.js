(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[316],{5455:function(e,t,s){Promise.resolve().then(s.bind(s,5822))},5822:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return m}});var n=s(7437),a=s(5233),i=s(4033),r=s(2265),l=s(6781),d=s(4958),o=s(9864),c=s(5767),x=s(1492);function m(){let e=(0,i.useRouter)(),{id:t}=(0,i.useParams)(),[s,m]=(0,r.useState)(null),[h,u]=(0,r.useState)(!0),[p,g]=(0,r.useState)([]),[f,b]=(0,r.useState)(null),[j,v]=(0,r.useState)(""),[N,w]=(0,r.useState)(!1),k=(0,x.eI)("https://rshosgiwnqcvwfnkqdwc.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJzaG9zZ2l3bnFjdndmbmtxZHdjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTE2MzMxNjEsImV4cCI6MjA2NzIwOTE2MX0.9yrX80F0-3w0H8u3Qx449oYRpD4vA1wEjEYP7mdylGg");(0,r.useEffect)(()=>{t&&(u(!0),d.On.getRecipeById(t).then(e=>{m(e?{id:e.id||"",title:e.title,description:e.description,ingredients:(e.ingredients||[]).map(e=>({ingredient_id:e.ingredient_id||"",name:e.name,amount:e.amount,unit:e.unit,shopUrl:e.shopUrl})),steps:e.steps||[],videoUrl:e.videoUrl,channel:e.channel,createdat:e.createdat?new Date(e.createdat):new Date,isfavorite:e.isfavorite||!1}:null),g([])}).catch(()=>{m(null),g([])}).finally(()=>u(!1)))},[t]);let y=async()=>{s&&window.confirm("정말 이 레시피를 삭제하시겠습니까?")&&(await d.On.deleteRecipe(s.id),e.push("/"))};function _(e){let{ingredient:t}=e,[s,a]=(0,r.useState)(!1);(0,r.useEffect)(()=>{t.ingredient_id&&k.from("ingredients_master").select("is_favorite").eq("id",t.ingredient_id).single().then(e=>{let{data:t}=e;return a((null==t?void 0:t.is_favorite)||!1)})},[t.ingredient_id]);let i=async()=>{if(!t.ingredient_id)return;let e=!s;a(e),await k.from("ingredients_master").update({is_favorite:e}).eq("id",t.ingredient_id)};return(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("span",{className:"text-white font-medium flex-1",children:t.name}),(0,n.jsxs)("span",{className:"text-gray-400 text-sm",children:[t.amount," ",t.unit]}),t.shopUrl&&(0,n.jsx)("a",{href:t.shopUrl,target:"_blank",rel:"noopener noreferrer",className:"ml-2 px-3 py-1 bg-orange-500 text-white rounded-full text-xs font-bold hover:bg-orange-600 transition",children:"구매하기"}),t.ingredient_id&&(0,n.jsx)("button",{onClick:i,className:"ml-2 text-lg ".concat(s?"text-orange-400":"text-gray-400"),"aria-label":"재료 즐겨찾기",children:s?"♥":"♡"})]})}if(h)return(0,n.jsx)("div",{className:"min-h-screen bg-black flex items-center justify-center animate-fadeIn",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 bg-[#1a1a1a] rounded-full flex items-center justify-center animate-pulse",children:(0,n.jsx)("svg",{className:"w-8 h-8 text-orange-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}),(0,n.jsx)("span",{className:"text-white text-lg font-medium",children:"레시피를 불러오는 중..."})]})});if(!s)return(0,n.jsxs)("div",{className:"min-h-screen bg-black flex flex-col items-center justify-center px-4 animate-fadeIn",children:[(0,n.jsx)(a.Z,{}),(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("div",{className:"w-24 h-24 mx-auto mb-6 bg-[#1a1a1a] rounded-full flex items-center justify-center",children:(0,n.jsx)("svg",{className:"w-12 h-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.172 16.172a4 4 0 015.656 0M9 12h6m-6-4h6m2 5.291A7.962 7.962 0 0112 15c-2.34 0-4.47-.881-6.08-2.33"})})}),(0,n.jsx)("h2",{className:"text-white text-xl font-bold mb-3",children:"레시피를 찾을 수 없습니다"}),(0,n.jsx)("p",{className:"text-gray-400 mb-6",children:"요청하신 레시피가 존재하지 않거나 삭제되었습니다"}),(0,n.jsx)("button",{onClick:()=>e.back(),className:"px-6 py-3 bg-gradient-to-r from-orange-400 to-orange-500 text-white rounded-xl font-medium hover:from-orange-500 hover:to-orange-600 transition-all duration-200 shadow-lg",children:"돌아가기"})]})]});let C=s.ingredients,I=p.map(e=>({...e,ingredients:e.ingredients.map(e=>({...e}))}));return(0,n.jsxs)("div",{className:"min-h-screen bg-black pb-24 px-4 pt-4 sm:pt-6 overflow-y-auto max-w-md mx-auto",children:[(0,n.jsx)(a.Z,{}),s.videoUrl&&(0,o.Zi)(s.videoUrl)?(0,n.jsxs)("div",{className:"w-full aspect-video bg-[#1a1a1a] rounded-2xl overflow-hidden shadow-lg mb-6 relative flex items-center justify-center",children:[(0,n.jsx)("img",{src:(0,o.b7)((0,o.Ei)(s.videoUrl)||"","hq"),alt:"유튜브 썸네일",className:"w-full h-full object-cover"}),(0,n.jsxs)("a",{href:s.videoUrl,target:"_blank",rel:"noopener noreferrer",className:"absolute bottom-3 right-3 bg-red-600 text-white rounded-full px-4 py-2 flex items-center gap-2 shadow-lg hover:bg-red-700 transition-colors text-sm font-bold",children:[(0,n.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{d:"M10 15l5.19-3L10 9v6zm12-3c0-5.52-4.48-10-10-10S2 6.48 2 12s4.48 10 10 10 10-4.48 10-10zm-2 0c0 4.42-3.58 8-8 8s-8-3.58-8-8 3.58-8 8-8 8 3.58 8 8z"})}),"유튜브에서 보기"]})]}):(0,n.jsx)("div",{className:"w-full aspect-video bg-[#232323] rounded-2xl mb-6 flex items-center justify-center text-gray-500 text-lg",children:"대표 이미지 없음"}),(0,n.jsxs)("div",{className:"flex items-center justify-between mb-4 sm:mb-6",children:[(0,n.jsx)("button",{onClick:()=>e.back(),className:"p-2.5 sm:p-3 bg-[#1a1a1a] text-white rounded-xl hover:bg-[#2a2a2a] transition-all duration-200 min-h-[44px] min-w-[44px] flex items-center justify-center",children:(0,n.jsx)("svg",{className:"w-4 h-4 sm:w-5 sm:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,n.jsx)("span",{className:"text-base sm:text-lg font-bold text-white",children:"레시피 상세"}),(0,n.jsxs)("div",{className:"flex gap-1.5 sm:gap-2",children:[(0,n.jsx)("button",{className:"px-3 sm:px-4 py-2 bg-[#2a2a2a] text-white rounded-xl text-xs sm:text-sm font-medium hover:bg-[#3a3a3a] transition-all duration-200 min-h-[44px]",onClick:()=>w(!0),children:"수정"}),(0,n.jsx)("button",{className:"px-3 sm:px-4 py-2 bg-red-500 text-white rounded-xl text-xs sm:text-sm font-medium hover:bg-red-600 transition-all duration-200 min-h-[44px]",onClick:y,children:"삭제"})]})]}),N&&s&&(0,n.jsx)("div",{className:"animate-slideIn",children:(0,n.jsx)(l.Z,{onSave:e=>{w(!1),m(e)},onCancel:()=>w(!1),initialRecipe:s})}),!N&&(0,n.jsxs)("div",{className:"space-y-6 animate-fadeIn",children:[(0,n.jsxs)("div",{className:"bg-[#1a1a1a] border border-[#2a2a2a] rounded-2xl p-6 shadow-lg",children:[(0,n.jsx)("h1",{className:"text-2xl font-bold text-white mb-3 leading-tight",children:s.title}),s.channel&&(0,n.jsxs)("div",{className:"text-orange-400 text-sm font-semibold mb-2",children:["채널: ",s.channel]}),s.description&&(0,n.jsx)("p",{className:"text-gray-400 text-base mb-4 leading-relaxed",children:s.description}),(0,n.jsx)("div",{className:"flex items-center gap-6"})]}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("h2",{className:"text-xl font-bold text-white mb-4 flex items-center gap-2",children:[(0,n.jsx)("svg",{className:"w-6 h-6 text-orange-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),"조리 단계"]}),(0,n.jsx)("div",{className:"space-y-4",children:s.steps.map((e,t)=>(0,n.jsx)("div",{className:"bg-[#1a1a1a] border border-[#2a2a2a] rounded-2xl p-5 shadow-lg hover:border-[#3a3a3a] transition-all duration-200",children:(0,n.jsxs)("div",{className:"flex items-start gap-4",children:[(0,n.jsx)("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-orange-400 to-orange-500 flex items-center justify-center text-white font-bold text-lg shadow-lg flex-shrink-0",children:t+1}),(0,n.jsx)("div",{className:"flex-1",children:(0,n.jsx)("p",{className:"text-white text-base leading-relaxed mb-2",children:e.description})})]})},"".concat(e.description,"-").concat(t)))})]}),(0,n.jsxs)("div",{className:"mt-8",children:[(0,n.jsxs)("h2",{className:"text-xl font-bold text-white mb-4 flex items-center gap-2",children:[(0,n.jsx)("svg",{className:"w-6 h-6 text-orange-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"필요한 재료"]}),(0,n.jsx)("div",{className:"flex flex-col gap-3",children:C.map(e=>(0,n.jsx)(_,{ingredient:e},e.ingredient_id))})]}),(0,n.jsxs)("div",{className:"mt-10",children:[(0,n.jsxs)("h2",{className:"text-xl font-bold text-white mb-4 flex items-center gap-2",children:[(0,n.jsx)("svg",{className:"w-6 h-6 text-orange-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 8l4 4m0 0l-4 4m4-4H3"})}),"관련 레시피"]}),0===I.length?(0,n.jsx)("div",{className:"bg-black border border-[#232323] rounded-2xl p-6 text-gray-500 text-center",children:"관련 레시피가 없습니다"}):(0,n.jsx)("div",{className:"flex flex-col gap-4",children:I.map(e=>{let{common:t,extra:s}=function(e){let t=[],s=[],n={};return e.ingredients.forEach(e=>{n[e.ingredient_id]=e}),Object.values(n).forEach(e=>{e.shopUrl?t.push(e):s.push(e)}),{common:t,extra:s}}(e);return(0,n.jsxs)("div",{className:"bg-black border border-[#232323] rounded-2xl p-5",children:[(0,n.jsx)("div",{className:"text-white font-bold text-lg mb-2",children:e.title}),(0,n.jsxs)("div",{className:"mb-2",children:[(0,n.jsx)("span",{className:"text-orange-400 font-semibold text-sm",children:"공통 재료"}),(0,n.jsxs)("span",{className:"text-gray-400 text-xs ml-1",children:["(",t.length,"개)"]}),(0,n.jsx)("div",{className:"flex flex-wrap gap-2 mt-1",children:t.map(e=>(0,n.jsx)("span",{className:"inline-flex items-center gap-1 bg-[#232323] text-white text-xs px-3 py-1.5 rounded-full border border-[#333]",children:(0,n.jsx)("span",{children:e.name})},e.ingredient_id))})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"text-gray-400 font-semibold text-sm",children:"추가 재료"}),(0,n.jsxs)("span",{className:"text-gray-500 text-xs ml-1",children:["(",s.length,"개)"]}),(0,n.jsx)("div",{className:"flex flex-wrap gap-2 mt-1",children:s.map(e=>(0,n.jsx)("span",{className:"inline-flex items-center gap-1 bg-[#232323] text-white text-xs px-3 py-1.5 rounded-full border border-[#333]",children:(0,n.jsx)("span",{children:e.name})},e.ingredient_id))})]})]},e.id)})})]})]}),(0,n.jsx)(c.Z,{activeTab:"recipebook",onTabChange:t=>{"home"===t?e.push("/"):"recipebook"===t?e.push("/?tab=recipebook"):"favorites"===t?e.push("/?tab=favorites"):"search"===t&&e.push("/?tab=search")}})]})}}},function(e){e.O(0,[717,555,971,938,744],function(){return e(e.s=5455)}),_N_E=e.O()}]);