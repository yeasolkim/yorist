"use strict";(()=>{var t={};t.id=699,t.ids=[699],t.modules={517:t=>{t.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},2304:(t,e,r)=>{r.r(e),r.d(e,{headerHooks:()=>g,originalPathname:()=>y,patchFetch:()=>f,requestAsyncStorage:()=>l,routeModule:()=>p,serverHooks:()=>m,staticGenerationAsyncStorage:()=>d,staticGenerationBailout:()=>h});var a={};r.r(a),r.d(a,{POST:()=>c,runtime:()=>u});var o=r(5419),s=r(9108),n=r(9678),i=r(8070);let u="nodejs";async function c(t){try{let{youtubeUrl:e}=await t.json();if(!e||"string"!=typeof e)return i.Z.json({error:"유효한 유튜브 링크를 입력하세요."},{status:400});let r=function(t){let e=t.match(/[?&]v=([\w-]{11})/)||t.match(/youtu\.be\/([\w-]{11})/);return e?e[1]:null}(e);if(!r)return i.Z.json({error:"유효한 유튜브 링크에서 영상 ID를 추출할 수 없습니다."},{status:400});let a=await fetch(`https://video.google.com/timedtext?type=list&v=${r}`),o=await a.text(),s=o.match(/<track[^>]*lang_code="ko"[^>]*>/),n=!1;if(s||(n=!!(s=o.match(/<track[^>]*kind="asr"[^>]*lang_code="ko"[^>]*>/))),!s)return i.Z.json({error:"한글 자막(자동 생성 포함)을 찾을 수 없습니다."},{status:404});let u=await fetch(`https://video.google.com/timedtext?lang=ko&v=${r}${n?"&kind=asr":""}`),c=await u.text();if(!c.includes("<text"))return i.Z.json({error:"한글 자막 데이터가 없습니다."},{status:404});let p=Array.from(c.matchAll(/<text[^>]*>([\s\S]*?)<\/text>/g)).map(t=>t[1].replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#39;/g,"'")).join(" ");if(!p.trim())return i.Z.json({error:"자막 텍스트를 추출할 수 없습니다."},{status:404});return i.Z.json({transcript:p})}catch(t){return i.Z.json({error:"자막 추출 중 오류가 발생했습니다."},{status:500})}}process.env.YOUTUBE_API_KEY;let p=new o.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/youtube-transcript/route",pathname:"/api/youtube-transcript",filename:"route",bundlePath:"app/api/youtube-transcript/route"},resolvedPagePath:"/Users/yeasolkim/Documents/GitHub/yorist/yorist-app/src/app/api/youtube-transcript/route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:l,staticGenerationAsyncStorage:d,serverHooks:m,headerHooks:g,staticGenerationBailout:h}=p,y="/api/youtube-transcript/route";function f(){return(0,n.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:d})}}};var e=require("../../../webpack-runtime.js");e.C(t);var r=t=>e(e.s=t),a=e.X(0,[638,206],()=>r(2304));module.exports=a})();